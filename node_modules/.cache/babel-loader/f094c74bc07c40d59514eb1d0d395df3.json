{"ast":null,"code":"var _jsxFileName = \"C:\\\\Coding\\\\my-app\\\\src\\\\Account\\\\Product\\\\Edit.js\";\nimport axios from \"axios\";\nimport React, { Component } from \"react\";\nimport ErrorForm from \"./../../Member/ErrorForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Edit extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: \"\",\n      name: \"\",\n      price: \"\",\n      category: \"\",\n      brand: \"\",\n      categoryArr: [],\n      brandArr: [],\n      sale: 0,\n      status: 1,\n      des: \"\",\n      company: \"\",\n      file: \"\",\n      img: \"\",\n      imgArr: [],\n      formError: {},\n      msg: \"\",\n      avatarCheckBox: [] // hinh anh muon xoa\n\n    };\n    this.handleValue = this.handleValue.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.renderBrand = this.renderBrand.bind(this);\n    this.renderCategory = this.renderCategory.bind(this);\n    this.renderImg = this.renderImg.bind(this);\n    this.renderSale = this.renderSale.bind(this);\n    this.handleAvatarCB = this.handleAvatarCB.bind(this);\n    this.handleInputFile = this.handleInputFile.bind(this);\n  }\n\n  handleAvatarCB(e) {\n    let {\n      avatarCheckBox\n    } = this.state;\n    let getImg = e.target.checked; // console.log(getImg);\n\n    let nameImg = e.target.value;\n\n    if (getImg) {\n      avatarCheckBox.push(nameImg);\n      this.setState({\n        avatarCheckBox: avatarCheckBox\n      });\n    } else {\n      let index = avatarCheckBox.indexOf(nameImg);\n\n      if (index > -1) {\n        avatarCheckBox.splice(index, 1);\n      }\n    }\n  }\n\n  renderImg() {\n    let {\n      id\n    } = this.state;\n    let {\n      imgArr\n    } = this.state;\n\n    if (imgArr.length > 0) {\n      return imgArr.map((value, key) => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"editImg\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"img_pc\",\n            src: \"http://localhost/laravel/public/upload/user/product/\" + id + \"/\" + value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            value: value,\n            className: \"check-img\",\n            onClick: this.handleAvatarCB\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this);\n      });\n    }\n  }\n\n  componentDidMount() {\n    axios.get(\"http://localhost/laravel/public/api/category-brand\").then(respon => {\n      this.setState({\n        categoryArr: respon.data.category,\n        brandArr: respon.data.brand\n      });\n    });\n    const getId = this.props.match.params.id;\n    const editProduct = JSON.parse(localStorage.getItem(\"info\"));\n    let urlProduct = \"http://localhost/laravel/public/api/user/product/\" + getId;\n    let accessToken = editProduct.success.token;\n    let config = {\n      headers: {\n        Authorization: \"Bearer \" + accessToken,\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        Accept: \"application/json\"\n      }\n    };\n    axios.get(urlProduct, config).then(res => {\n      // console.log(res);\n      if (res.data.errors) {\n        this.setState({\n          formError: res.data.errors\n        });\n      } else {\n        this.setState({\n          name: res.data.data.name,\n          brand: res.data.data.id_brand,\n          category: res.data.data.id_category,\n          price: res.data.data.price,\n          company: res.data.data.company_profile,\n          des: res.data.data.detail,\n          status: res.data.data.status,\n          imgArr: res.data.data.image,\n          id: res.data.data.id_user,\n          sale: res.data.data.sale\n        }); //console.log(res.data.data.image);\n      }\n    });\n  }\n\n  handleValue(e) {\n    let nameInput = e.target.name;\n    let value = e.target.value;\n    this.setState({\n      [nameInput]: value\n    });\n  }\n\n  handleEdit(e) {\n    e.preventDefault();\n    const getId = this.props.match.params.id;\n    let flag = true;\n    let {\n      name,\n      price,\n      category,\n      brand,\n      company,\n      file,\n      avatarCheckBox,\n      imgArr\n    } = this.state; //\n    //\n    //\n    //\n\n    let errSubmit = this.state.formErrors;\n\n    if (name === \"\") {\n      flag = false;\n      errSubmit.name = \"vui long nhap ten san pham\";\n    } // price\n\n\n    if (price === \"\") {\n      flag = false;\n      errSubmit.price = \"vui long nhap gia san pham\";\n    } // category\n\n\n    if (category === \"\") {\n      flag = false;\n      errSubmit.category = \"vui long nhap category\";\n    } //brand\n\n\n    if (brand === \"\") {\n      flag = false;\n      errSubmit.brand = \"vui long nhap brand\";\n    } // company\n\n\n    if (company === \"\") {\n      flag = false;\n      errSubmit.company = \"vui long nhap cong ty\";\n    } //  img\n\n\n    if (file == \"\") {\n      flag = false;\n      errSubmit.file = \"vui long nhap anh\";\n    } else {\n      // avatarCheckBox,imgArr\n      avatarCheckBox.map((value, key) => {\n        let index = imgArr.indexOf(value);\n\n        if (index > -1) {\n          imgArr.splice(index, 1);\n        }\n      });\n\n      if (Object.keys(file).length + imgArr.length > 3) {\n        flag = false;\n        errSubmit.file = \"khong nhap qua 3 hinh anh\";\n        console.log(Object.keys(file).length + imgArr.length);\n      } else {\n        if (file.size > 1024 * 1024) {\n          flag = false;\n          errSubmit.file = \"anh tai len qua 1mb\";\n        } else {\n          const typeImg = [\"png\", \"jpg\", \"jpeg\", \"PNG\", \"JPG\"];\n          Object.keys(file).map((key, index) => {\n            const res = file[key][\"name\"].split(\".\");\n\n            if (!typeImg.includes(res[1])) {\n              errSubmit.file = \"vui long nhap dung dinh dang hinh anh\";\n            }\n          });\n        }\n      }\n    }\n\n    if (!flag) {\n      this.setState({\n        formError: errSubmit\n      });\n    } else {\n      const editPtData = JSON.parse(localStorage.getItem(\"infoCus\"));\n      let url = \"http://localhost/laravel/public/api/user/edit-product/\" + getId;\n      const accessToken = editPtData.success.token;\n      let config = {\n        headers: {\n          Authorization: \"Bearer \" + accessToken,\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n          Accept: \"application/json\"\n        }\n      };\n      let formData = new FormData();\n      formData.append(\"name\", this.state.name);\n      formData.append(\"category\", this.state.category);\n      formData.append(\"brand\", this.state.brand);\n      formData.append(\"price\", this.state.price);\n      formData.append(\"detail\", this.state.des);\n      formData.append(\"company\", this.state.company);\n      formData.append(\"status\", this.state.status);\n      formData.append(\"sale\", 0);\n      Object.keys(file).map((key, index) => {\n        formData.append(\"file[]\", file[key]);\n      });\n      avatarCheckBox.map((value, key) => {\n        formData.append(\"avatarCheckBox[]\", value);\n      });\n      axios.post(url, formData, config).then(res => {\n        if (res.data.errors) {\n          this.setState({\n            formError: res.data.errors\n          });\n        } else {\n          this.setState({\n            msg: \"edit san pham thanh cong\"\n          });\n        }\n      });\n    }\n  }\n\n  renderBrand() {\n    let {\n      brandArr\n    } = this.state;\n    return brandArr.map((value, key) => {\n      return /*#__PURE__*/_jsxDEV(\"option\", {\n        value: value[\"id\"],\n        children: value[\"brand\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 14\n      }, this);\n    });\n  }\n\n  renderCategory() {\n    let {\n      categoryArr\n    } = this.state;\n    return categoryArr.map((value, key) => {\n      return /*#__PURE__*/_jsxDEV(\"option\", {\n        value: value[\"id\"],\n        children: value[\"category\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 14\n      }, this);\n    });\n  }\n\n  renderSale() {\n    let {\n      status\n    } = this.state;\n\n    if (status == 0) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"productSale\",\n          type: \"text\",\n          name: \"sale\",\n          placeholder: \"0\",\n          value: this.state.sale,\n          onChange: this.handleValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            display: \"inline-block\"\n          },\n          children: \"%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true);\n    }\n  }\n\n  handleInputFile(e) {\n    const file = e.target.files;\n    this.setState({\n      file: file\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm-9\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"signup-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Edit Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this), this.state.msg, /*#__PURE__*/_jsxDEV(ErrorForm, {\n          formError: this.state.formError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          action: \"#\",\n          enctype: \"multipart/form-data\",\n          onSubmit: this.handleEdit,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Name Product\",\n            name: \"name\",\n            value: this.state.name,\n            onChange: this.handleValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Price\",\n            name: \"price\",\n            value: this.state.price,\n            onChange: this.handleValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            type: \"text\",\n            name: \"category\",\n            value: this.state.category,\n            onChange: this.handleValue,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 15\n            }, this), this.renderCategory()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            type: \"text\",\n            name: \"brand\",\n            value: this.state.brand,\n            onChange: this.handleValue,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Brand\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 15\n            }, this), this.renderBrand()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            type: \"text\",\n            name: \"status\",\n            value: this.state.status,\n            onChange: this.handleValue,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"1\",\n              children: \"New\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"0\",\n              children: \"Sale\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this), this.renderSale(), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Company\",\n            name: \"company\",\n            value: this.state.company,\n            onChange: this.handleValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            name: \"img\",\n            multiple: true,\n            onChange: this.handleInputFile\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: this.renderImg()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"des\",\n            placeholder: \"Product Description\",\n            rows: 11,\n            defaultValue: \"\",\n            value: this.state.des,\n            onChange: this.handleValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-default\",\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Edit;","map":{"version":3,"sources":["C:/Coding/my-app/src/Account/Product/Edit.js"],"names":["axios","React","Component","ErrorForm","Edit","constructor","props","state","id","name","price","category","brand","categoryArr","brandArr","sale","status","des","company","file","img","imgArr","formError","msg","avatarCheckBox","handleValue","bind","handleEdit","renderBrand","renderCategory","renderImg","renderSale","handleAvatarCB","handleInputFile","e","getImg","target","checked","nameImg","value","push","setState","index","indexOf","splice","length","map","key","componentDidMount","get","then","respon","data","getId","match","params","editProduct","JSON","parse","localStorage","getItem","urlProduct","accessToken","success","token","config","headers","Authorization","Accept","res","errors","id_brand","id_category","company_profile","detail","image","id_user","nameInput","preventDefault","flag","errSubmit","formErrors","Object","keys","console","log","size","typeImg","split","includes","editPtData","url","formData","FormData","append","post","display","files","render"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { Component } from \"react\";\r\nimport ErrorForm from \"./../../Member/ErrorForm\";\r\n\r\nclass Edit extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: \"\",\r\n      name: \"\",\r\n      price: \"\",\r\n      category: \"\",\r\n      brand: \"\",\r\n      categoryArr: [],\r\n      brandArr: [],\r\n      sale: 0,\r\n      status: 1,\r\n      des: \"\",\r\n      company: \"\",\r\n      file: \"\",\r\n      img: \"\",\r\n      imgArr: [],\r\n      formError: {},\r\n      msg: \"\",\r\n      avatarCheckBox: [], // hinh anh muon xoa\r\n    };\r\n\r\n    this.handleValue = this.handleValue.bind(this);\r\n    this.handleEdit = this.handleEdit.bind(this);\r\n    this.renderBrand = this.renderBrand.bind(this);\r\n    this.renderCategory = this.renderCategory.bind(this);\r\n    this.renderImg = this.renderImg.bind(this);\r\n    this.renderSale = this.renderSale.bind(this);\r\n    this.handleAvatarCB = this.handleAvatarCB.bind(this);\r\n    this.handleInputFile = this.handleInputFile.bind(this);\r\n  }\r\n  handleAvatarCB(e) {\r\n    let { avatarCheckBox } = this.state;\r\n    let getImg = e.target.checked;\r\n    // console.log(getImg);\r\n    let nameImg = e.target.value;\r\n    if (getImg) {\r\n      avatarCheckBox.push(nameImg);\r\n      this.setState({\r\n        avatarCheckBox: avatarCheckBox,\r\n      });\r\n    } else {\r\n      let index = avatarCheckBox.indexOf(nameImg);\r\n      if (index > -1) {\r\n        avatarCheckBox.splice(index, 1);\r\n      }\r\n    }\r\n  }\r\n  renderImg() {\r\n    let { id } = this.state;\r\n    let { imgArr } = this.state;\r\n\r\n    if (imgArr.length > 0) {\r\n      return imgArr.map((value, key) => {\r\n        return (\r\n          <li key={key} className=\"editImg\">\r\n            <img className=\"img_pc\" src={\"http://localhost/laravel/public/upload/user/product/\" +id +  \"/\" + value}/>\r\n            <input\r\n              type=\"checkbox\"\r\n              value={value}\r\n              className=\"check-img\"\r\n              onClick={this.handleAvatarCB}\r\n            />\r\n          </li>\r\n        );\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .get(\"http://localhost/laravel/public/api/category-brand\")\r\n      .then((respon) => {\r\n        this.setState({\r\n          categoryArr: respon.data.category,\r\n          brandArr: respon.data.brand,\r\n        });\r\n      });\r\n    const getId = this.props.match.params.id;\r\n    const editProduct = JSON.parse(localStorage.getItem(\"info\"));\r\n    let urlProduct =\r\n      \"http://localhost/laravel/public/api/user/product/\" + getId;\r\n    let accessToken = editProduct.success.token;\r\n\r\n    let config = {\r\n      headers: {\r\n        Authorization: \"Bearer \" + accessToken,\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n        Accept: \"application/json\",\r\n      },\r\n    };\r\n    axios.get(urlProduct, config).then((res) => {\r\n      // console.log(res);\r\n      if (res.data.errors) {\r\n        this.setState({\r\n          formError: res.data.errors,\r\n        });\r\n      } else {\r\n        this.setState({\r\n          name: res.data.data.name,\r\n          brand: res.data.data.id_brand,\r\n          category: res.data.data.id_category,\r\n          price: res.data.data.price,\r\n\r\n          company: res.data.data.company_profile,\r\n          des: res.data.data.detail,\r\n          status: res.data.data.status,\r\n          imgArr: res.data.data.image,\r\n          id: res.data.data.id_user,\r\n          sale: res.data.data.sale,\r\n        });\r\n        //console.log(res.data.data.image);\r\n      }\r\n    });\r\n  }\r\n\r\n  handleValue(e) {\r\n    let nameInput = e.target.name;\r\n    let value = e.target.value;\r\n    this.setState({\r\n      [nameInput]: value,\r\n    });\r\n  }\r\n\r\n  handleEdit(e) {\r\n    e.preventDefault();\r\n    const getId = this.props.match.params.id;\r\n    let flag = true;\r\n    let {\r\n      name,\r\n      price,\r\n      category,\r\n      brand,\r\n      company,\r\n      file,\r\n      avatarCheckBox,\r\n      imgArr,\r\n    } = this.state;\r\n\r\n    //\r\n\r\n    //\r\n    //\r\n\r\n    //\r\n    let errSubmit = this.state.formErrors;\r\n    if (name === \"\") {\r\n      flag = false;\r\n      errSubmit.name = \"vui long nhap ten san pham\";\r\n    }\r\n\r\n    // price\r\n    if (price === \"\") {\r\n      flag = false;\r\n      errSubmit.price = \"vui long nhap gia san pham\";\r\n    }\r\n\r\n    // category\r\n    if (category === \"\") {\r\n      flag = false;\r\n      errSubmit.category = \"vui long nhap category\";\r\n    }\r\n\r\n    //brand\r\n    if (brand === \"\") {\r\n      flag = false;\r\n      errSubmit.brand = \"vui long nhap brand\";\r\n    }\r\n\r\n    // company\r\n    if (company === \"\") {\r\n      flag = false;\r\n      errSubmit.company = \"vui long nhap cong ty\";\r\n    }\r\n\r\n    //  img\r\n\r\n    if (file == \"\") {\r\n      flag = false;\r\n      errSubmit.file = \"vui long nhap anh\";\r\n    } else {\r\n      // avatarCheckBox,imgArr\r\n      avatarCheckBox.map((value, key) => {\r\n        let index = imgArr.indexOf(value);\r\n        if (index > -1) {\r\n          imgArr.splice(index, 1);\r\n        }\r\n      });\r\n\r\n      if (Object.keys(file).length + imgArr.length > 3) {\r\n        flag = false;\r\n        errSubmit.file = \"khong nhap qua 3 hinh anh\";\r\n        console.log(Object.keys(file).length + imgArr.length);\r\n      } else {\r\n        if (file.size > 1024 * 1024) {\r\n          flag = false;\r\n          errSubmit.file = \"anh tai len qua 1mb\";\r\n        } else {\r\n          const typeImg = [\"png\", \"jpg\", \"jpeg\", \"PNG\", \"JPG\"];\r\n          Object.keys(file).map((key, index) => {\r\n            const res = file[key][\"name\"].split(\".\");\r\n            if (!typeImg.includes(res[1])) {\r\n              errSubmit.file = \"vui long nhap dung dinh dang hinh anh\";\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!flag) {\r\n      this.setState({\r\n        formError: errSubmit,\r\n      });\r\n    } else {\r\n      const editPtData = JSON.parse(localStorage.getItem(\"infoCus\"));\r\n      let url =\r\n        \"http://localhost/laravel/public/api/user/edit-product/\" + getId;\r\n      const accessToken = editPtData.success.token;\r\n      let config = {\r\n        headers: {\r\n          Authorization: \"Bearer \" + accessToken,\r\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n          Accept: \"application/json\",\r\n        },\r\n      };\r\n      let formData = new FormData();\r\n      formData.append(\"name\", this.state.name);\r\n      formData.append(\"category\", this.state.category);\r\n      formData.append(\"brand\", this.state.brand);\r\n      formData.append(\"price\", this.state.price);\r\n      formData.append(\"detail\", this.state.des);\r\n      formData.append(\"company\", this.state.company);\r\n      formData.append(\"status\", this.state.status);\r\n      formData.append(\"sale\", 0);\r\n\r\n      Object.keys(file).map((key, index) => {\r\n        formData.append(\"file[]\", file[key]);\r\n      });\r\n      avatarCheckBox.map((value, key) => {\r\n        formData.append(\"avatarCheckBox[]\", value);\r\n      });\r\n      axios.post(url, formData, config).then((res) => {\r\n        if (res.data.errors) {\r\n          this.setState({\r\n            formError: res.data.errors,\r\n          });\r\n        } else {\r\n          this.setState({\r\n            msg: \"edit san pham thanh cong\",\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  renderBrand() {\r\n    let { brandArr } = this.state;\r\n    return brandArr.map((value, key) => {\r\n      return <option value={value[\"id\"]}>{value[\"brand\"]}</option>;\r\n    });\r\n  }\r\n\r\n  renderCategory() {\r\n    let { categoryArr } = this.state;\r\n\r\n    return categoryArr.map((value, key) => {\r\n      return <option value={value[\"id\"]}>{value[\"category\"]}</option>;\r\n    });\r\n  }\r\n\r\n  renderSale() {\r\n    let { status } = this.state;\r\n    if (status == 0) {\r\n      return (\r\n        <>\r\n          <input\r\n            id=\"productSale\"\r\n            type=\"text\"\r\n            name=\"sale\"\r\n            placeholder=\"0\"\r\n            value={this.state.sale}\r\n            onChange={this.handleValue}\r\n          />\r\n          <span style={{ display: \"inline-block\" }}>%</span>\r\n        </>\r\n      );\r\n    }\r\n  }\r\n\r\n  handleInputFile(e) {\r\n    const file = e.target.files;\r\n    this.setState({\r\n      file: file,\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"col-sm-9\">\r\n        <div className=\"signup-form\">\r\n          <h2>Edit Product</h2>\r\n          {this.state.msg}\r\n          <ErrorForm formError={this.state.formError} />\r\n          <form\r\n            action=\"#\"\r\n            enctype=\"multipart/form-data\"\r\n            onSubmit={this.handleEdit}\r\n          >\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Name Product\"\r\n              name=\"name\"\r\n              value={this.state.name}\r\n              onChange={this.handleValue}\r\n            />\r\n\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Price\"\r\n              name=\"price\"\r\n              value={this.state.price}\r\n              onChange={this.handleValue}\r\n            />\r\n\r\n            <select\r\n              type=\"text\"\r\n              name=\"category\"\r\n              value={this.state.category}\r\n              onChange={this.handleValue}\r\n            >\r\n              <option value=\"\">Category</option>\r\n              {this.renderCategory()}\r\n            </select>\r\n\r\n            <select\r\n              type=\"text\"\r\n              name=\"brand\"\r\n              value={this.state.brand}\r\n              onChange={this.handleValue}\r\n            >\r\n              <option value=\"\">Brand</option>\r\n              {this.renderBrand()}\r\n            </select>\r\n\r\n            <select\r\n              type=\"text\"\r\n              name=\"status\"\r\n              value={this.state.status}\r\n              onChange={this.handleValue}\r\n            >\r\n              <option value=\"1\">New</option>\r\n              <option value=\"0\">Sale</option>\r\n            </select>\r\n            {this.renderSale()}\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Company\"\r\n              name=\"company\"\r\n              value={this.state.company}\r\n              onChange={this.handleValue}\r\n            />\r\n            <input\r\n              type=\"file\"\r\n              name=\"img\"\r\n              multiple\r\n              onChange={this.handleInputFile}\r\n            />\r\n            <ul>{this.renderImg()}</ul>\r\n\r\n            <textarea\r\n              name=\"des\"\r\n              placeholder=\"Product Description\"\r\n              rows={11}\r\n              defaultValue={\"\"}\r\n              value={this.state.des}\r\n              onChange={this.handleValue}\r\n            />\r\n\r\n            <button type=\"submit\" className=\"btn btn-default\">\r\n              Edit\r\n            </button>\r\n          </form>\r\n        </div>\r\n        {/*/sign up form*/}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Edit;\r\n"]},"metadata":{},"sourceType":"module"}