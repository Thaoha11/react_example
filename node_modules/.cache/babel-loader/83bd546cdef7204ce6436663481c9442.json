{"ast":null,"code":"var _jsxFileName = \"C:\\\\Coding\\\\my-app\\\\src\\\\Account\\\\Product\\\\Edit.js\";\nimport axios from \"axios\";\nimport React, { Component } from \"react\";\nimport ErrorForm from \"../../Member/ErrorForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Edit extends Edit {\n  constructor(props) {\n    super(props);\n\n    this.handleInputFile = e => {\n      let file = e.target.files;\n      this.setState({\n        file\n      });\n    };\n\n    this.renderCategory = () => {};\n\n    this.renderBrand = () => {\n      let {\n        brandArr\n      } = this.state; // console.log(brandArr)\n\n      if (brandArr.length > 0) {\n        return brandArr.map((value, key) => {\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            value: value['id'],\n            children: value['brand']\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this);\n        });\n      }\n    };\n\n    this.state = {\n      name: \"\",\n      price: \"\",\n      category: \"\",\n      brand: \"\",\n      categoryArr: [],\n      brandArr: [],\n      sale: \"\",\n      status: 1,\n      des: \"\",\n      company: \"\",\n      file: \"\",\n      formError: {},\n      msg: \"\",\n      avatarCheckBox: [] //hinh anh muon xoa\n\n    };\n    this.handleValue = this.handleValue.bind(this);\n    this.addProduct = this.addProduct.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get(\"http://localhost/laravel/public/api/category-brand\").then(res => {\n      // console.log(res);\n      this.setState({\n        categoryArr: res.data.category,\n        brandArr: res.data.brand\n      });\n    });\n  }\n\n  handleValue(e) {\n    let nameInput = e.target.name;\n    let value = e.target.value;\n    this.setState({\n      [nameInput]: value\n    });\n  }\n\n  renderSale() {}\n\n  addProduct(e) {\n    e.preventDefault();\n    let flag = true;\n    let {\n      name,\n      price,\n      des,\n      file,\n      company\n    } = this.state;\n    let errSubmit = {};\n\n    if (name == '') {\n      flag = false;\n      errSubmit.name = 'Name ko duoc de trong';\n    }\n\n    if (price == '') {\n      flag = false;\n      errSubmit.price = 'price ko duoc de trong';\n    }\n\n    if (des == '') {\n      flag = false;\n      errSubmit.des = 'Description ko duoc de trong';\n    }\n\n    if (company == '') {\n      flag = false;\n      errSubmit.company = 'company ko duoc de trong';\n    }\n\n    if (file == '') {\n      flag = false;\n      errSubmit.file = 'Avatar ko duoc de trong';\n    } else {\n      if (Object.keys(file).length > 3) {\n        flag = false;\n        errSubmit.file = 'ko tai len qua 3 anh';\n      } else {\n        Object.keys(file).map((key, index) => {\n          // console.log(file[key])\n          if (file[key][\"size\"] > 1024 * 1024) {\n            flag = false;\n            errSubmit.file = 'anh qua 1 mb';\n          } else {\n            const typeImg = [\"png\", \"jpg\", \"jpeg\", \"PNG\", \"JPG\"];\n            let res = file[key][\"name\"].split(\".\");\n\n            if (!typeImg.includes(res[1])) {\n              errSubmit.file = \"vui long nhap dung dinh dang hinh anh\";\n            } else {\n              flag = true;\n              errSubmit.file = \"\";\n            }\n          }\n        });\n      }\n    }\n\n    if (!flag) {\n      this.setState({\n        formError: errSubmit\n      });\n    } else {\n      const productData = JSON.parse(localStorage.getItem(\"info\"));\n      let urlProduct = \"http://localhost/laravel/public/api/user/add-product\";\n      const accessToken = productData.success.token;\n      let config = {\n        headers: {\n          Authorization: \"Bearer \" + accessToken,\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n          Accept: \"application/json\"\n        }\n      };\n      const formData = new FormData();\n      formData.append(\"name\", this.state.name);\n      formData.append(\"price\", this.state.price);\n      formData.append(\"company\", this.state.company);\n      formData.append(\"status\", this.state.status);\n      formData.append(\"brand\", this.state.brand);\n      formData.append(\"detail\", this.state.des);\n      formData.append(\"category\", this.state.category);\n      formData.append(\"sale\", this.state.sale);\n      Object.keys(file).map((value, key) => {\n        formData.append(\"file[]\", file[value]);\n      });\n      axios.post(urlProduct, formData, config).then(res => {\n        console.log(res);\n\n        if (res.data.errors) {\n          this.setState({\n            formError: res.data.errors\n          });\n        } else {\n          this.setState({\n            name: \"\",\n            price: \"\",\n            category: \"\",\n            brand: \"\",\n            des: \"\",\n            sale: \"\",\n            company: \"\",\n            status: 1,\n            file: \"\",\n            msg: \"them san pham thanh cong\"\n          });\n        }\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm-9\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"signup-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Create Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 15\n        }, this), this.state.msg, /*#__PURE__*/_jsxDEV(ErrorForm, {\n          formError: this.state.formError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          action: \"#\",\n          enctype: \"multipart/form-data\",\n          onSubmit: this.addProduct,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Name Product\",\n            name: \"name\",\n            value: this.state.name,\n            onChange: this.handleValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Price\",\n            name: \"price\",\n            value: this.state.price,\n            onChange: this.handleValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            type: \"text\",\n            name: \"category\",\n            value: this.state.category,\n            onChange: this.handleValue,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 19\n            }, this), this.renderCategory()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            type: \"text\",\n            name: \"brand\",\n            value: this.state.brand,\n            onChange: this.handleValue,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Brand\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 19\n            }, this), this.renderBrand()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            type: \"text\",\n            name: \"status\",\n            value: this.state.status,\n            onChange: this.handleValue,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"1\",\n              children: \"New\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"0\",\n              children: \"Sale\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 17\n          }, this), this.renderSale(), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Company\",\n            name: \"company\",\n            value: this.state.company,\n            onChange: this.handleValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            name: \"img\",\n            multiple: true,\n            onChange: this.handleInputFile\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"des\",\n            placeholder: \"Product Description\",\n            rows: 11,\n            defaultValue: \"\",\n            value: this.state.des,\n            onChange: this.handleValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-default\",\n            children: \"Sign up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nexport default Edit;","map":{"version":3,"sources":["C:/Coding/my-app/src/Account/Product/Edit.js"],"names":["axios","React","Component","ErrorForm","Edit","constructor","props","handleInputFile","e","file","target","files","setState","renderCategory","renderBrand","brandArr","state","length","map","value","key","name","price","category","brand","categoryArr","sale","status","des","company","formError","msg","avatarCheckBox","handleValue","bind","addProduct","componentDidMount","get","then","res","data","nameInput","renderSale","preventDefault","flag","errSubmit","Object","keys","index","typeImg","split","includes","productData","JSON","parse","localStorage","getItem","urlProduct","accessToken","success","token","config","headers","Authorization","Accept","formData","FormData","append","post","console","log","errors","render"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { Component } from \"react\";\r\nimport ErrorForm from \"../../Member/ErrorForm\";\r\n\r\nclass Edit extends Edit{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: \"\",\r\n            price: \"\",\r\n            category: \"\",\r\n            brand: \"\",\r\n            categoryArr: [],\r\n            brandArr: [],\r\n            sale: \"\",\r\n            status: 1,\r\n            des: \"\",\r\n            company: \"\",\r\n            file: \"\",\r\n            formError: {},\r\n            msg: \"\",\r\n            avatarCheckBox :[] //hinh anh muon xoa\r\n        };\r\n        this.handleValue = this.handleValue.bind(this);\r\n        this.addProduct = this.addProduct.bind(this);\r\n    }\r\n    componentDidMount() {\r\n        axios\r\n          .get(\"http://localhost/laravel/public/api/category-brand\")\r\n          .then((res) => {\r\n            // console.log(res);\r\n            this.setState({\r\n              categoryArr: res.data.category,\r\n              brandArr: res.data.brand,\r\n            });\r\n            \r\n          });\r\n\r\n    }\r\n\r\n    handleValue(e) {\r\n        let nameInput = e.target.name;\r\n        let value = e.target.value;\r\n        this.setState({\r\n          [nameInput]: value,\r\n        });\r\n    }\r\n    handleInputFile=(e)=>{\r\n      let file =  e.target.files;\r\n      this.setState({file})\r\n    }\r\n\r\n    renderSale() {\r\n        \r\n    }\r\n    \r\n    renderCategory=()=>{\r\n      \r\n    }\r\n\r\n    renderBrand=()=>{\r\n      let {brandArr} = this.state;\r\n      // console.log(brandArr)\r\n      if(brandArr.length >0) {\r\n        return brandArr.map((value, key)=>{\r\n          return (\r\n            <option value={value['id']}>{value['brand']}</option>\r\n          )\r\n        })\r\n      }\r\n    }\r\n\r\n    addProduct(e){\r\n        e.preventDefault();\r\n        let flag = true;\r\n        let {name , price , des , file, company }= this.state;\r\n        let errSubmit = {};\r\n        if(name == ''){\r\n            flag = false;\r\n            errSubmit.name = 'Name ko duoc de trong'\r\n        }\r\n        \r\n        if(price == ''){\r\n          flag = false;\r\n          errSubmit.price = 'price ko duoc de trong'\r\n        }\r\n       \r\n        if(des == ''){\r\n          flag = false;\r\n          errSubmit.des = 'Description ko duoc de trong'\r\n        }\r\n        \r\n        \r\n        if(company == ''){\r\n          flag = false;\r\n          errSubmit.company = 'company ko duoc de trong'\r\n        }\r\n       \r\n\r\n        \r\n        if(file == ''){\r\n          flag = false;\r\n          errSubmit.file = 'Avatar ko duoc de trong'\r\n        }\r\n        else{\r\n            if(Object.keys(file).length > 3){\r\n              flag = false;\r\n              errSubmit.file = 'ko tai len qua 3 anh'\r\n            }\r\n            else{\r\n              Object.keys(file).map((key,index)=>{\r\n                // console.log(file[key])\r\n                if(file[key][\"size\"] > 1024*1024){\r\n                    flag = false;\r\n                    errSubmit.file = 'anh qua 1 mb'\r\n                }\r\n                else{\r\n                  const typeImg = [\"png\", \"jpg\", \"jpeg\", \"PNG\", \"JPG\"]\r\n                  let res = file[key][\"name\"].split(\".\")\r\n                  if (!typeImg.includes(res[1])) {\r\n                    errSubmit.file = \"vui long nhap dung dinh dang hinh anh\";\r\n                  }\r\n                  else{\r\n                    flag = true;\r\n                    errSubmit.file = \"\";\r\n                  }\r\n                }\r\n              })\r\n            }\r\n              \r\n          \r\n         \r\n        }\r\n        if(!flag){\r\n            this.setState({\r\n                formError: errSubmit\r\n            })\r\n        }\r\n        else{\r\n          const productData = JSON.parse(localStorage.getItem(\"info\"));\r\n          let urlProduct = \"http://localhost/laravel/public/api/user/add-product\";\r\n          const accessToken = productData.success.token;\r\n          let config = {\r\n            headers: {\r\n                Authorization: \"Bearer \" + accessToken,\r\n                \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n                Accept: \"application/json\",\r\n            }\r\n          }\r\n          const formData = new FormData();\r\n          formData.append(\"name\", this.state.name);\r\n          formData.append(\"price\", this.state.price);\r\n          formData.append(\"company\", this.state.company);\r\n          formData.append(\"status\", this.state.status);\r\n          formData.append(\"brand\", this.state.brand);\r\n          formData.append(\"detail\", this.state.des);\r\n          formData.append(\"category\", this.state.category);\r\n          formData.append(\"sale\", this.state.sale);\r\n          Object.keys(file).map((value, key) => {\r\n            formData.append(\"file[]\", file[value]);\r\n          });\r\n          axios.post(urlProduct, formData, config).then((res) => {\r\n            console.log(res)\r\n            if(res.data.errors){\r\n                this.setState({\r\n                    formError : res.data.errors\r\n                })\r\n            }\r\n            else {\r\n                this.setState({\r\n                    name: \"\",\r\n                    price: \"\",\r\n                    category: \"\",\r\n                    brand: \"\",\r\n                    des: \"\",\r\n                    sale: \"\",\r\n                    company: \"\",\r\n                    status: 1,\r\n                    file: \"\",\r\n                    msg: \"them san pham thanh cong\",\r\n                });\r\n            }\r\n\r\n          })\r\n        }\r\n\r\n        \r\n    }\r\n  \r\n    render() {\r\n        return (\r\n          <div className=\"col-sm-9\">\r\n            <div className=\"signup-form\">\r\n              {/*sign up form*/}\r\n              <h2>Create Product</h2>\r\n              {this.state.msg}\r\n              <ErrorForm formError={this.state.formError} />\r\n              <form\r\n                action=\"#\"\r\n                enctype=\"multipart/form-data\"\r\n                onSubmit={this.addProduct}\r\n              >\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Name Product\"\r\n                  name=\"name\"\r\n                  value={this.state.name}\r\n                  onChange={this.handleValue}\r\n                />\r\n    \r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Price\"\r\n                  name=\"price\"\r\n                  value={this.state.price}\r\n                  onChange={this.handleValue}\r\n                />\r\n    \r\n                <select\r\n                  type=\"text\"\r\n                  name=\"category\"\r\n                  value={this.state.category}\r\n                  onChange={this.handleValue}\r\n                >\r\n                  <option value=\"\">Category</option>\r\n                  {this.renderCategory()}\r\n                </select>\r\n    \r\n                <select\r\n                  type=\"text\"\r\n                  name=\"brand\"\r\n                  value={this.state.brand}\r\n                  onChange={this.handleValue}\r\n                >\r\n                  <option value=\"\">Brand</option>\r\n                  {this.renderBrand()}\r\n                </select>\r\n    \r\n                <select\r\n                  type=\"text\"\r\n                  name=\"status\"\r\n                  value={this.state.status}\r\n                  onChange={this.handleValue}\r\n                >\r\n                  <option value=\"1\">New</option>\r\n                  <option value=\"0\">Sale</option>\r\n                </select>\r\n    \r\n                {this.renderSale()}\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Company\"\r\n                  name=\"company\"\r\n                  value={this.state.company}\r\n                  onChange={this.handleValue}\r\n                />\r\n                <input\r\n                  type=\"file\"\r\n                  name=\"img\"\r\n                  multiple\r\n                  onChange={this.handleInputFile}\r\n                />\r\n                <textarea\r\n                  name=\"des\"\r\n                  placeholder=\"Product Description\"\r\n                  rows={11}\r\n                  defaultValue={\"\"}\r\n                  value={this.state.des}\r\n                  onChange={this.handleValue}\r\n                />\r\n    \r\n                <button type=\"submit\" className=\"btn btn-default\">\r\n                  Sign up\r\n                </button>\r\n              </form>\r\n            </div>\r\n            {/*/sign up form*/}\r\n          </div>\r\n        );\r\n      }\r\n}\r\nexport default Edit;"]},"metadata":{},"sourceType":"module"}