{"ast":null,"code":"var _jsxFileName = \"C:\\\\Coding\\\\my-app\\\\src\\\\Account\\\\Product\\\\Edit.js\";\nimport axios from \"axios\";\nimport React, { Component } from \"react\";\nimport ErrorForm from \"../../Member/ErrorForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Edit extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleInputFile = e => {\n      let file = e.target.files;\n      this.setState({\n        file\n      });\n    };\n\n    this.state = {\n      name: \"\",\n      price: \"\",\n      category: \"\",\n      brand: \"\",\n      categoryArr: [],\n      brandArr: [],\n      sale: \"\",\n      status: 1,\n      des: \"\",\n      company: \"\",\n      file: \"\",\n      id: \"\",\n      formError: {},\n      msg: \"\",\n      imageArr: {},\n      img: '',\n      avatarCheckBox: [] //hinh anh muon xoa\n\n    };\n    this.handleValue = this.handleValue.bind(this);\n    this.renderSale = this.renderSale.bind(this);\n    this.renderCatelogy = this.renderCatelogy.bind(this);\n    this.renderBrand = this.renderBrand.bind(this);\n    this.editProduct = this.editProduct.bind(this);\n    this.handleAvatar = this.handleAvatar.bind(this);\n    this.renderImg = this.renderImg.bind(this);\n  }\n\n  renderImg(e) {\n    let {\n      id\n    } = this.state;\n    let {\n      imageArr\n    } = this.state;\n\n    if (imageArr.length > 0) {\n      return imageArr.map((value, key) => {\n        // console.log(imageArr)\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"edit_img\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"http://localhost/laravel/public/upload/user/product/\" + id + \"/\" + value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            value: value,\n            className: \"check-img\",\n            onClick: this.handleAvatar\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 25\n          }, this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 21\n        }, this);\n      });\n    }\n  } // - hinh moi upload\n  // - hinh cu: 1,2,3\n  // - hinh muon xoa : 1,2 => hinh cu con lai 3\n  // => sau do lay tong so hinh cuoi cung gui qua api\n\n\n  handleAvatar(e) {\n    let stateCheck = e.target.checked;\n    console.log(stateCheck);\n    let {\n      avatarCheckBox\n    } = this.state;\n    let namImg = e.target.value;\n\n    if (stateCheck) {\n      avatarCheckBox.push(namImg);\n      this.setState({\n        avatarCheckBox: avatarCheckBox\n      });\n    } else {\n      avatarCheckBox.splice(avatarCheckBox.indexOf(namImg), 1);\n    } // A:(1,2,3)\n    // 1\n    // => (2,3)\n    // // \n    // (1,2,3)\n    // (1,2)\n    // map chay lan dau Tien , kiem tra 1 co trong mang A \n    // =>A: (2,3)\n    // map lan 2\n    // =>A: 3 \n\n\n    console.log(avatarCheckBox);\n  }\n\n  componentDidMount() {\n    axios.get(\"http://localhost/laravel/public/api/category-brand\").then(res => {\n      // console.log(res);\n      this.setState({\n        categoryArr: res.data.category,\n        brandArr: res.data.brand\n      });\n    });\n    const getId = this.props.match.params.id;\n    const editProduct = JSON.parse(localStorage.getItem('info'));\n    let urlProduct = \"http://localhost/laravel/public/api/user/product/\" + getId;\n    let accessToken = editProduct.success.token;\n    let config = {\n      headers: {\n        Authorization: \"Bearer \" + accessToken,\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        Accept: \"application/json\"\n      }\n    };\n    axios.get(urlProduct, config).then(res => {\n      console.log(res);\n\n      if (res.data.errors) {\n        this.setState({\n          formError: res.data.errors\n        });\n      } else {\n        this.setState({\n          name: res.data.data.name,\n          id: res.data.data.id_user,\n          brand: res.data.data.id_brand,\n          category: res.data.data.id_catelogy,\n          price: res.data.data.price,\n          imageArr: res.data.data.image,\n          status: res.data.data.status,\n          company: res.data.data.company_profile,\n          des: res.data.data.detail,\n          sale: res.data.data.sale\n        });\n      }\n    });\n  }\n\n  handleValue(e) {\n    let nameInput = e.target.name;\n    let value = e.target.value;\n    this.setState({\n      [nameInput]: value\n    });\n  }\n\n  renderSale(e) {\n    let {\n      status\n    } = this.state;\n\n    if (status == 0) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"productSale\",\n          type: \"text\",\n          name: \"sale\",\n          placeholder: \"0\",\n          value: this.state.value,\n          onChange: this.handleValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true);\n    }\n  }\n\n  renderCatelogy(e) {\n    let {\n      categoryArr\n    } = this.state;\n\n    if (categoryArr.length > 0) {\n      return categoryArr.map((value, key) => {\n        return /*#__PURE__*/_jsxDEV(\"option\", {\n          value: value[\"id\"],\n          children: [\" \", value[\"category\"], \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 19\n        }, this);\n      });\n    }\n  }\n\n  renderBrand(e) {\n    let {\n      brandArr\n    } = this.state;\n\n    if (brandArr.length > 0) {\n      return brandArr.map((value, key) => {\n        return /*#__PURE__*/_jsxDEV(\"option\", {\n          value: value[\"id\"],\n          children: [\" \", value[\"brand\"], \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }, this);\n      });\n    }\n  }\n\n  editProduct(e) {\n    e.preventDefault();\n    let flag = true;\n    let {\n      name,\n      price,\n      des,\n      category,\n      brand,\n      company,\n      file,\n      avatarCheckBox,\n      imageArr\n    } = this.state;\n    let errSubmit = this.state.formError;\n\n    if (name == '') {\n      flag = false;\n      errSubmit.name = 'Vui long nhap ten';\n    }\n\n    if (price == '') {\n      flag = false;\n      errSubmit.price = 'Vui long nhap gia';\n    }\n\n    if (company == '') {\n      flag = false;\n      errSubmit.company = 'Vui long nhap cong ty';\n    }\n\n    if (category == '') {\n      flag = false;\n      errSubmit.category = 'Vui long nhap ten';\n    }\n\n    if (brand == '') {\n      flag = false;\n      errSubmit.brand = 'Vui long nhap ten';\n    }\n\n    if (des == '') {\n      flag = false;\n      errSubmit.des = 'Vui long nhap mo ta';\n    }\n\n    if (file == '') {\n      flag = false;\n      errSubmit.file = 'Vui long nhap anh';\n    } else {\n      avatarCheckBox.map((value, key) => {\n        let index = imageArr.indexOf(value);\n\n        if (index > -1) {\n          imageArr.splice(index, 1);\n        } // hinh cu - hinh muon xoa = hinh con lai \n\n      }); // lay tung hinh cu ra (1,2,3)\n      // sau do kiem tra tung cai hinh cu nay co trong hinh xoa k? \n      // (1,2)\n      // co thi lay lai nhung cu con lai .\n      // hinh con lai + hinh moi > 3 \n\n      console.log(avatarCheckBox);\n\n      if (Object.keys(file).length + avatarCheckBox.length > 3) {\n        flag = false;\n        errSubmit.file = \"ko duoc tai qua 3 anh\";\n      } else {\n        Object.keys(file).map((key, index) => {\n          if (file[key][\"size\"] > 1024 * 1024) {\n            flag = false;\n            errSubmit.file = \"anh qua 1mb\";\n          } else {\n            const typeImg = [\"png\", \"jpg\", \"jpeg\", \"PNG\", \"JPG\"];\n            let res = file[key][\"name\"].split(\".\");\n\n            if (!typeImg.includes(res[1])) {\n              flag = false;\n              errSubmit.file = \"xem lai dinh dang anh\";\n            }\n          }\n        });\n      }\n\n      if (!flag) {\n        this.setState({\n          formError: errSubmit\n        });\n      } else {\n        const getId = this.props.match.params.id;\n        const editPtData = JSON.parse(localStorage.getItem(\"info\"));\n        let url = \"http://localhost/laravel/public/api/user/edit-product/\" + getId;\n        const accessToken = editPtData.success.token; // console.log(123)\n\n        let config = {\n          headers: {\n            Authorization: \"Bearer \" + accessToken,\n            \"Content-Type\": \"application/x-www-form-urlencoded\",\n            Accept: \"application/json\"\n          }\n        };\n        let formData = new FormData();\n        formData.append(\"name\", this.state.name);\n        formData.append(\"category\", this.state.category);\n        formData.append(\"brand\", this.state.brand);\n        formData.append(\"price\", this.state.price);\n        formData.append(\"detail\", this.state.des);\n        formData.append(\"company\", this.state.company);\n        formData.append(\"status\", this.state.status);\n        formData.append(\"sale\", 0);\n        Object.keys(file).map((key, index) => {\n          formData.append(\"file[]\", file[key]);\n        });\n        avatarCheckBox.map((value, key) => {\n          formData.append('avatarCheckBox[]', value);\n        });\n        axios.post(url, formData, config).then(res => {\n          if (res.data.errors) {\n            this.setState({\n              formError: res.data.errors\n            });\n          } else {\n            this.setState({\n              msg: \"edit thanh cong\"\n            });\n          }\n        });\n      }\n    }\n  }\n\n  render() {\n    // console.log(this.state.imageArr)\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-sm-9\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"signup-form\",\n        children: [\"sign up form\", /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Create Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 15\n        }, this), this.state.msg, /*#__PURE__*/_jsxDEV(ErrorForm, {\n          formError: this.state.formError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          action: \"#\",\n          enctype: \"multipart/form-data\",\n          onSubmit: this.editProduct,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Name Product\",\n            name: \"name\",\n            value: this.state.name,\n            onChange: this.handleValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Price\",\n            name: \"price\",\n            value: this.state.price,\n            onChange: this.handleValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            type: \"text\",\n            name: \"category\",\n            value: this.state.category,\n            onChange: this.handleValue,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 19\n            }, this), this.renderCatelogy()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            type: \"text\",\n            name: \"brand\",\n            value: this.state.brand,\n            onChange: this.handleValue,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Brand\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 19\n            }, this), this.renderBrand()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            type: \"text\",\n            name: \"status\",\n            value: this.state.status,\n            onChange: this.handleValue,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"1\",\n              children: \"New\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"0\",\n              children: \"Sale\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 17\n          }, this), this.renderSale(), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Company\",\n            name: \"company\",\n            value: this.state.company,\n            onChange: this.handleValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            name: \"img\",\n            multiple: true,\n            onChange: this.handleInputFile\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: this.renderImg()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"des\",\n            placeholder: \"Product Description\",\n            rows: 11,\n            defaultValue: \"\",\n            value: this.state.des,\n            onChange: this.handleValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-default\",\n            children: \"Sign up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 11\n    }, this);\n  }\n\n}\n\nexport default Edit;","map":{"version":3,"sources":["C:/Coding/my-app/src/Account/Product/Edit.js"],"names":["axios","React","Component","ErrorForm","Edit","constructor","props","handleInputFile","e","file","target","files","setState","state","name","price","category","brand","categoryArr","brandArr","sale","status","des","company","id","formError","msg","imageArr","img","avatarCheckBox","handleValue","bind","renderSale","renderCatelogy","renderBrand","editProduct","handleAvatar","renderImg","length","map","value","key","stateCheck","checked","console","log","namImg","push","splice","indexOf","componentDidMount","get","then","res","data","getId","match","params","JSON","parse","localStorage","getItem","urlProduct","accessToken","success","token","config","headers","Authorization","Accept","errors","id_user","id_brand","id_catelogy","image","company_profile","detail","nameInput","preventDefault","flag","errSubmit","index","Object","keys","typeImg","split","includes","editPtData","url","formData","FormData","append","post","render"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { Component } from \"react\";\r\nimport ErrorForm from \"../../Member/ErrorForm\";\r\n\r\nclass Edit extends Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: \"\",\r\n            price: \"\",\r\n            category: \"\",\r\n            brand: \"\",\r\n            categoryArr: [],\r\n            brandArr: [],\r\n            sale: \"\",\r\n            status: 1,\r\n            des: \"\",\r\n            company: \"\",\r\n            file: \"\",\r\n            id: \"\",\r\n            formError: {},\r\n            msg: \"\",\r\n            imageArr :{},\r\n            img :'',\r\n            avatarCheckBox :[] //hinh anh muon xoa\r\n        };\r\n        this.handleValue = this.handleValue.bind(this);\r\n        this.renderSale = this.renderSale.bind(this);\r\n        this.renderCatelogy = this.renderCatelogy.bind(this);\r\n        this.renderBrand = this.renderBrand.bind(this)\r\n        this.editProduct = this.editProduct.bind(this)\r\n        this.handleAvatar = this.handleAvatar.bind(this)\r\n        this.renderImg = this.renderImg.bind(this)\r\n    }\r\n    renderImg(e){\r\n        let {id} = this.state;\r\n        let {imageArr} = this.state;\r\n        if(imageArr.length > 0){\r\n            return imageArr.map((value,key)=>{\r\n                // console.log(imageArr)\r\n                return(\r\n                    <li key={key} className = \"edit_img\">\r\n                        <img  src={\"http://localhost/laravel/public/upload/user/product/\" +id +  \"/\" + value}/>\r\n                        <input type= \"checkbox\"  value={value} className=\"check-img\" onClick={this.handleAvatar} />\r\n                    </li>\r\n                )\r\n\r\n            })\r\n        }\r\n    }\r\n\r\n    // - hinh moi upload\r\n    // - hinh cu: 1,2,3\r\n    // - hinh muon xoa : 1,2 => hinh cu con lai 3\r\n    // => sau do lay tong so hinh cuoi cung gui qua api\r\n\r\n    handleAvatar(e){\r\n        let stateCheck = e.target.checked;\r\n        console.log(stateCheck)\r\n        let {avatarCheckBox} = this.state;\r\n        let namImg = e.target.value;\r\n        if(stateCheck){\r\n            avatarCheckBox.push(namImg)\r\n            this.setState({\r\n                avatarCheckBox : avatarCheckBox\r\n            })\r\n        }\r\n        else{\r\n          \r\n            avatarCheckBox.splice(avatarCheckBox.indexOf(namImg),1)\r\n            \r\n        }\r\n      \r\n        // A:(1,2,3)\r\n        // 1\r\n        // => (2,3)\r\n        // // \r\n        // (1,2,3)\r\n        // (1,2)\r\n\r\n        // map chay lan dau Tien , kiem tra 1 co trong mang A \r\n        // =>A: (2,3)\r\n        // map lan 2\r\n        // =>A: 3 \r\n        console.log(avatarCheckBox)\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get(\"http://localhost/laravel/public/api/category-brand\")\r\n          .then((res) => {\r\n            // console.log(res);\r\n            this.setState({\r\n              categoryArr: res.data.category,\r\n              brandArr: res.data.brand,\r\n            });\r\n            \r\n          });\r\n        const getId = this.props.match.params.id;\r\n        const editProduct = JSON.parse(localStorage.getItem('info'))\r\n        let urlProduct =\"http://localhost/laravel/public/api/user/product/\" + getId;\r\n        let accessToken =editProduct.success.token;\r\n        let config = {\r\n            headers: {\r\n                Authorization: \"Bearer \" + accessToken,\r\n                \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n                Accept: \"application/json\",\r\n            },\r\n        }\r\n        axios.get(urlProduct,config).then((res)=>{\r\n            console.log(res)\r\n            if(res.data.errors){\r\n              this.setState({\r\n                  formError : res.data.errors\r\n              })\r\n            }\r\n            else{\r\n                this.setState ({\r\n                    name : res.data.data.name,\r\n                    id :res.data.data.id_user,\r\n                    brand : res.data.data.id_brand,\r\n                    category : res.data.data.id_catelogy,\r\n                    price : res.data.data.price,\r\n                    imageArr : res.data.data.image,\r\n                    status : res.data.data.status,\r\n                    company : res.data.data.company_profile,\r\n                    des : res.data.data.detail,\r\n                    sale : res.data.data.sale\r\n                })\r\n                \r\n            }\r\n        })\r\n    }\r\n\r\n    handleValue(e) {\r\n        let nameInput = e.target.name;\r\n        let value = e.target.value;\r\n        this.setState({\r\n          [nameInput]: value,\r\n        });\r\n    }\r\n    handleInputFile=(e)=>{\r\n      let file =  e.target.files;\r\n      this.setState({file})\r\n    }\r\n\r\n    renderSale(e){\r\n        let { status } = this.state;\r\n        if (status == 0) {\r\n          return (\r\n            <>\r\n              <input  id=\"productSale\" type=\"text\" name=\"sale\" placeholder=\"0\" value={this.state.value}  onChange={this.handleValue}/>\r\n              <span>%</span>\r\n            </>\r\n          );\r\n        }\r\n    }\r\n    renderCatelogy(e){\r\n      let {categoryArr}= this.state;\r\n      if(categoryArr.length > 0){\r\n          return categoryArr.map((value,key)=>{\r\n              return(\r\n                  <option value= {value[\"id\"]}> {value[\"category\"]} </option>\r\n              )\r\n          })  \r\n      }\r\n  }\r\n    renderBrand(e){\r\n        let {brandArr}= this.state;\r\n        if(brandArr.length > 0){\r\n            return brandArr.map((value,key)=>{\r\n                return(\r\n                    <option value= {value[\"id\"]}> {value[\"brand\"]} </option>\r\n                )\r\n            })  \r\n        }\r\n    }\r\n\r\n    editProduct(e){\r\n        e.preventDefault();\r\n        \r\n        let flag = true;\r\n        let {name,price,des,category,brand,company,file,avatarCheckBox,imageArr}=this.state;\r\n        let errSubmit = this.state.formError;\r\n        if(name == ''){\r\n          flag = false;\r\n          errSubmit.name = 'Vui long nhap ten'\r\n        }\r\n        if(price == ''){\r\n          flag = false;\r\n          errSubmit.price = 'Vui long nhap gia'\r\n        }\r\n        if(company == ''){\r\n          flag = false;\r\n          errSubmit.company = 'Vui long nhap cong ty'\r\n        }\r\n        if(category == ''){\r\n          flag = false;\r\n          errSubmit.category = 'Vui long nhap ten'\r\n        }\r\n        if(brand == ''){\r\n          flag = false;\r\n          errSubmit.brand = 'Vui long nhap ten'\r\n        }\r\n      \r\n        if(des == ''){\r\n          flag = false;\r\n          errSubmit.des = 'Vui long nhap mo ta'\r\n        }\r\n        if(file == ''){\r\n          flag = false;\r\n          errSubmit.file = 'Vui long nhap anh'\r\n        }\r\n        else{\r\n            avatarCheckBox.map((value,key)=>{\r\n    \r\n              let index = imageArr.indexOf(value);\r\n              if (index > -1) {\r\n                  imageArr.splice(index, 1);\r\n              }\r\n                // hinh cu - hinh muon xoa = hinh con lai \r\n\r\n            })\r\n\r\n            // lay tung hinh cu ra (1,2,3)\r\n            // sau do kiem tra tung cai hinh cu nay co trong hinh xoa k? \r\n            // (1,2)\r\n            // co thi lay lai nhung cu con lai .\r\n\r\n            // hinh con lai + hinh moi > 3 \r\n            console.log(avatarCheckBox)\r\n            if(Object.keys(file).length + avatarCheckBox.length > 3){\r\n                flag = false;\r\n                errSubmit.file = \"ko duoc tai qua 3 anh\"\r\n            }\r\n            else{\r\n                Object.keys(file).map((key,index)=>{\r\n                    if(file[key][\"size\"] > 1024 * 1024){\r\n                        flag = false;\r\n                        errSubmit.file = \"anh qua 1mb\"\r\n                    }\r\n                    else{\r\n                        const typeImg = [\"png\", \"jpg\", \"jpeg\", \"PNG\", \"JPG\"]\r\n                        let res = file[key][\"name\"].split(\".\")\r\n                        if(!typeImg.includes(res[1])){\r\n                            flag = false;\r\n                            errSubmit.file = \"xem lai dinh dang anh\"\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n            if(!flag){\r\n                this.setState ({\r\n                    formError :errSubmit\r\n                })\r\n            }\r\n            else{\r\n                const getId = this.props.match.params.id;\r\n                const editPtData = JSON.parse(localStorage.getItem(\"info\"))\r\n                let url=\"http://localhost/laravel/public/api/user/edit-product/\" +getId\r\n                const accessToken = editPtData.success.token;\r\n                // console.log(123)\r\n                let config = {\r\n                  headers: {\r\n                    Authorization: \"Bearer \" + accessToken,\r\n                    \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n                    Accept: \"application/json\",\r\n                  },\r\n                };\r\n                let formData = new FormData();\r\n                formData.append(\"name\", this.state.name);\r\n                formData.append(\"category\", this.state.category);\r\n                formData.append(\"brand\", this.state.brand);\r\n                formData.append(\"price\", this.state.price);\r\n                formData.append(\"detail\", this.state.des);\r\n                formData.append(\"company\", this.state.company);\r\n                formData.append(\"status\", this.state.status);\r\n                formData.append(\"sale\", 0);\r\n                Object.keys(file).map((key,index)=>{\r\n                    formData.append(\"file[]\",file[key])\r\n                })\r\n                avatarCheckBox.map((value,key)=>{\r\n                    formData.append('avatarCheckBox[]',value)\r\n                })\r\n                axios.post(url,formData,config).then((res)=>{\r\n                    if(res.data.errors){\r\n                        this.setState({\r\n                            formError : res.data.errors\r\n                        })\r\n                    }\r\n                    else{\r\n                        this.setState({\r\n                            msg :\"edit thanh cong\"\r\n                        })\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    }\r\n   \r\n  \r\n    render() {\r\n      // console.log(this.state.imageArr)\r\n        return (\r\n          <div className=\"col-sm-9\">\r\n            <div className=\"signup-form\">\r\n              sign up form\r\n              <h2>Create Product</h2>\r\n              {this.state.msg}\r\n              <ErrorForm formError={this.state.formError} />\r\n              <form\r\n                action=\"#\"\r\n                enctype=\"multipart/form-data\"\r\n                onSubmit={this.editProduct}\r\n              >\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Name Product\"\r\n                  name=\"name\"\r\n                  value={this.state.name}\r\n                  onChange={this.handleValue}\r\n                />\r\n    \r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Price\"\r\n                  name=\"price\"\r\n                  value={this.state.price}\r\n                  onChange={this.handleValue}\r\n                />\r\n    \r\n                <select\r\n                  type=\"text\"\r\n                  name=\"category\"\r\n                  value={this.state.category}\r\n                  onChange={this.handleValue}>\r\n                  <option value=\"\">Category</option>\r\n                  {this.renderCatelogy()}\r\n                </select>\r\n                \r\n                <select\r\n                  type=\"text\"\r\n                  name=\"brand\"\r\n                  value={this.state.brand}\r\n                  onChange={this.handleValue}>\r\n                  <option value=\"\">Brand</option>\r\n                  {this.renderBrand()}\r\n                </select>\r\n                \r\n                <select\r\n                  type=\"text\"\r\n                  name=\"status\"\r\n                  value={this.state.status}\r\n                  onChange={this.handleValue}\r\n                >\r\n                  <option value=\"1\">New</option>\r\n                  <option value=\"0\">Sale</option>\r\n                  \r\n                </select>\r\n                {this.renderSale()}\r\n                \r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Company\"\r\n                  name=\"company\"\r\n                  value={this.state.company}\r\n                  onChange={this.handleValue}\r\n                />\r\n                <input\r\n                  type=\"file\"\r\n                  name=\"img\"\r\n                  multiple\r\n                  onChange={this.handleInputFile}\r\n                />\r\n                <ul>\r\n                    {this.renderImg()}\r\n                </ul>\r\n                <textarea\r\n                  name=\"des\"\r\n                  placeholder=\"Product Description\"\r\n                  rows={11}\r\n                  defaultValue={\"\"}\r\n                  value={this.state.des}\r\n                  onChange={this.handleValue}\r\n                />\r\n    \r\n                <button type=\"submit\" className=\"btn btn-default\">\r\n                  Sign up\r\n                </button>\r\n              </form>\r\n            </div>\r\n            {/*/sign up form*/}\r\n          </div>\r\n        );\r\n      }\r\n}\r\nexport default Edit;"]},"metadata":{},"sourceType":"module"}